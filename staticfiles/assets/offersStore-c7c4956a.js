import{m as c,a as f}from"./vendor-535dae5b.js";import{f as d,p as u,u as h}from"./usePaginatedQuery-bce4ac9c.js";const a=c("https://talentconnecthink.eu/api/offers");function l({search:e=void 0,limit:t=void 0,offset:r=0}){const i=d(e||{}),n=u({...i,id:void 0,type:void 0,locationId:i.id,locationType:i.type});return a.get("/",{query:{...n,limit:t,offset:r}})}function S(e){return a.get(`${e}/`)}function E(e,t){return a.patch(`${e}/standard-location/`,{location:t})}const o=50,s="recentSearches";function p(e){const t=localStorage.getItem(s);if(t){const r=JSON.parse(t);r.length>=o&&(r.length=o-1),localStorage.setItem(s,JSON.stringify([...r,e]))}else localStorage.setItem(s,JSON.stringify([e]))}const y=10,g={job:"",location:void 0},m={temporality:void 0,attendance:void 0,contractType:void 0,competitor:void 0,company:void 0,postingDate:void 0,minSalary:void 0,status:void 0,duplicates:void 0,titleAndDescription:void 0},v=f("offers",{state:()=>({initialized:!1,query:h(l,{search:{...structuredClone(g),...structuredClone(m)},limit:y,offset:0}),selectedOffer:void 0}),getters:{offers(){return this.query.data},filters(){return this.query.params.search}},actions:{async init(){await this.query.fetchNextPage(!0),this.offers.length&&this.setSelectedOfferFromOfferId(this.offers[0].id),this.initialized=!0},async onFilterChange(e,t){this.selectedOffer=void 0,this.query.data=[],this.query.params.search[e]=t,this.init()},async setSelectedOfferFromOfferId(e){this.selectedOffer=await S(e)},saveSearch(){p({search:this.query.params.search,date:new Date().toISOString()})},async restoreSearch(e){this.query.params.search=e,this.init()}}});async function q(){const e=v();return e.initialized||await e.init(),e}export{s as R,E as a,S as g,q as u};
